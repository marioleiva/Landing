<html>
  <head>
    <!-- Add this to <head> -->

<!-- Load required Bootstrap and BootstrapVue CSS -->
<link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
<link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />

<!-- Load polyfills to support older browsers -->
<script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>

<!-- Load Vue followed by BootstrapVue -->
<script src="//unpkg.com/vue@latest/dist/vue.min.js"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

<!-- Load the following for BootstrapVueIcons support -->
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>
  </head>
  <body>
    <div id="app">
      <img class="wave" src="Recursos/wave.png">
      <div class="container">
          <div class="img">
              <img src="Recursos/bg.svg">
          </div>
          <div class="login-content">
              <form>
                  <img src="Recursos/dynamicall.jpeg">
                  <h4 class="title">ACCESO AL SISTEMA</h4>
                  
                      
                    <svg class="bi bi-alert-triangle text-success" width="32" height="32" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  ...
</svg>
                    <!-- alt="..." on <img> element -->
<img src="/assets/img/bootstrap.svg" alt="Bootstrap" ...>
                    
                    <i class="bi-github" role="img" aria-label="GitHub"></i>
                    <svg class="bi" ... role="img" aria-label="Tools">
  <use xlink:href="bootstrap-icons.svg#tools"/>
</svg>
                <div> 
                    
                    
              
                    
                    <button type="button" class="btn btn-primary">Primary</button>
<button type="button" class="btn btn-secondary">Secondary</button>
<button type="button" class="btn btn-success">Success</button>
<button type="button" class="btn btn-danger">Danger</button>
<button type="button" class="btn btn-warning">Warning</button>
<button type="button" class="btn btn-info">Info</button>
<button type="button" class="btn btn-light">Light</button>
<button type="button" class="btn btn-dark">Dark</button>

<button type="button" class="btn btn-link">Link</button>
                    
                   
  <b-button>Button </b-button>
  <b-button variant="danger">Button</b-button>
  <b-button variant="success">Button</b-button>
  <b-button variant="outline-primary">Button </b-button>
</div>
                <div class="input-div one">
                  </div>
                  <div class="input-div one">
                      <div class="i">
                          <i class="fas fa-user"></i>
                      </div>
                      <div class="div">
                          <input type="tel" v-model="USUARIO" maxlength="16" placeholder="Usuario" class="input">
                      </div>
                  </div>
                  <div class="input-div pass">
                      <div class="i">
                          <i class="fas fa-lock"></i>
                      </div>
                      <div class="div">
                          <input type="password" v-model="PASSWORD" maxlength="16" placeholder="Password" class="input">
                      </div>
                  </div>
                  <input class="btn btnLogin cajaRojoClaro" v-on:click="validarUsuario" value="Ingresar">
              </form>
          </div>
      </div>
    
    
      <b-modal id="formularioListaProgramasxUsuario" size="md" data-html="true" hide-footer hide-header>
          <div class="card redondoCardLight  cajaGrisClaroDelgado ">
              <br />
              <div class="row">
                  <div class="col-sm-12" v-for="item in ListaMaestra">
                      <div class="row">
                          <div class="col-sm-12 col-md-12" style="height: 5px;"></div>
                          <div class="col-xs-5 col-sm-5 text-center">
                              <b-avatar class="text-center" v-on:click="irInicio({ID_ROL:item.ID,PROGRAMA:item.PROGRAMA,ROL:item.ROL})" button icon="person-badge" size="3rem" variant="info"></b-avatar>
                          </div>
                          <div class="col-xs-7 col-sm-7">
                              <span style="font-size: 9px">{{item.PROGRAMA}}</span><br /><span style="font-size: 16px"><b>{{item.ROL}}</b></span>
                          </div>
                          <div class="col-sm-12 col-md-12" style="height: 5px;"></div>
                      </div>
    
                      <br />
                  </div>
              </div>
          </div>
    
      </b-modal>
    </div>
    
    <style>
      * {
          padding: 0;
          margin: 0;
          box-sizing: border-box;
      }
    
      body {
          font-family: 'Poppins', sans-serif;
          overflow: hidden;
      }
    
      .wave {
          position: fixed;
          bottom: 0;
          left: 0;
          height: 100%;
          z-index: -1;
      }
    
      .container {
          width: 100vw;
          height: 100vh;
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          grid-gap: 7rem;
          padding: 0 2rem;
      }
    
      .img {
          display: flex;
          justify-content: flex-end;
          align-items: center;
      }
    
      .login-content {
          display: flex;
          justify-content: flex-start;
          align-items: center;
          text-align: center;
      }
    
      .img img {
          width: 500px;
      }
    
      form {
          width: 360px;
      }
    
      .login-content img {
          height: 100px;
      }
    
      .login-content h2 {
          margin: 15px 0;
          color: #333;
          text-transform: uppercase;
          font-size: 2.9rem;
      }
    
      .login-content .input-div {
          position: relative;
          display: grid;
          grid-template-columns: 7% 93%;
          margin: 25px 0;
          padding: 5px 0;
          border-bottom: 2px solid #d9d9d9;
      }
    
          .login-content .input-div.one {
              margin-top: 0;
          }
    
      .i {
          color: #d9d9d9;
          display: flex;
          justify-content: center;
          align-items: center;
      }
    
          .i i {
              transition: .3s;
          }
    
      .input-div > div {
          position: relative;
          height: 45px;
      }
    
          .input-div > div > h5 {
              position: absolute;
              left: 10px;
              top: 50%;
              transform: translateY(-50%);
              color: #999;
              font-size: 18px;
              transition: .3s;
          }
    
      .input-div:before, .input-div:after {
          content: '';
          position: absolute;
          bottom: -2px;
          width: 0%;
          height: 2px;
          background-color: #38d39f;
          transition: .4s;
      }
    
      .input-div:before {
          right: 50%;
      }
    
      .input-div:after {
          left: 50%;
      }
    
      .input-div.focus:before, .input-div.focus:after {
          width: 50%;
      }
    
      .input-div.focus > div > h5 {
          top: -5px;
          font-size: 15px;
      }
    
      .input-div.focus > .i > i {
          color: #38d39f;
      }
    
      .input-div > div > input {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          border: none;
          outline: none;
          background: none;
          padding: 0.5rem 0.7rem;
          font-size: 1.2rem;
          color: #555;
          font-family: 'poppins', sans-serif;
      }
    
      .input-div.pass {
          margin-bottom: 4px;
      }
    
      a {
          display: block;
          text-align: right;
          text-decoration: none;
          color: #999;
          font-size: 0.9rem;
          transition: .3s;
      }
    
          a:hover {
              color: #38d39f;
          }
    
    
      .btn:hover {
          background-position: right;
      }
    
    
      @media screen and (max-width: 1050px) {
          .container {
              grid-gap: 5rem;
          }
      }
    
      @media screen and (max-width: 1000px) {
          form {
              width: 290px;
          }
    
          .login-content h2 {
              font-size: 2.4rem;
              margin: 8px 0;
          }
    
          .img img {
              width: 400px;
          }
      }
    
      @media screen and (max-width: 900px) {
          .container {
              grid-template-columns: 1fr;
          }
    
          .img {
              display: none;
          }
    
          .wave {
              display: none;
          }
    
          .login-content {
              justify-content: center;
          }
      }
    </style>
    
    
    <script>
          const inputs = document.querySelectorAll(".input");
    
      function addcl() {
          let parent = this.parentNode.parentNode;
          parent.classList.add("focus");
      }
    
      function remcl() {
          let parent = this.parentNode.parentNode;
          if (this.value == "") {
              parent.classList.remove("focus");
          }
      }
    
      inputs.forEach(input => {
          input.addEventListener("focus", addcl);
          input.addEventListener("blur", remcl);
      });
    
    
    
      var app = new Vue({
          el: '#app',
          data: {
              MensajeSistema: '',
              SERVER_URL: '', // 'http://chat.bpo.pe/DashBoard',
              USUARIO: '',
              PASSWORD: '',
              URL: '@Url.RouteUrl("default")',
              ListaMaestra: [],
          },
          methods: {  // http://chat.bpo.pe/HFC
              mostrarModal: function (form) {
                  this.MensajeSistema = form.msg;
                  this.$bvModal.show(form.modal);
              },
              mostrarToast(variant = null) {
                  this.MensajeSistema = variant.msg;
                  this.$bvToast.toast(this.MensajeSistema, {
                      title: `Alerta de sistema`,
                      variant: variant.toast,
                      solid: true
                  })
              },
              validarUsuario: function () {
                  if (this.USUARIO != '' && this.PASSWORD != '') {
                      axios.post(this.SERVER_URL + '/api/Usuarios/Verificar', {
                          ID: 0,
                          USUARIO: this.USUARIO,
                          PASSWORD: this.PASSWORD,
                          TIPO: 1,
                      }).then(response => {
                          if (response.data.RESULTADO == 'CORRECTO') {
                              localStorage.setItem('SERVER_URL', this.SERVER_URL);
                              localStorage.setItem('USUARIO', this.USUARIO);
                              localStorage.setItem('ID_USUARIO', response.data.ID);
                              localStorage.setItem('NOMBRES', response.data.NOMBRES);
                              localStorage.setItem('APELLIDOS', response.data.APELLIDOS);
                              this.elegirPrograma(response.data.ID);
                          } else {
                              this.mostrarToast({ toast: 'warning', msg: 'Usuario incorrecto ...' });
                          }
                      }).catch(e => {
                          this.mostrarToast({ toast: 'warning', msg: 'Error en la conexión ...' });
                      });
                  } else {
                      this.mostrarToast({ toast: 'warning', msg: 'Verificar los campos' });
                  }
              },
              elegirPrograma: function (idUsuario) {      //  alert(JSON.stringify(this.ListaMaestra));
                  axios.post(this.SERVER_URL + '/api/Usuarios/ListarProgramasxUsuario', {
                      ID: idUsuario,
                      USUARIO: this.USUARIO,
                      PASSWORD: this.PASSWORD,
                      TIPO: 6,
                  }).then(response => {
                      this.ListaMaestra = [];
                      this.ListaMaestra = response.data;
                      if (this.ListaMaestra.length > 1) {
                          this.pantalla({ PANTALLA: 'formularioListaProgramasxUsuario' })
                      } else if (this.ListaMaestra.length > 0) {
                          for (var i in this.ListaMaestra) {
                              this.irInicio({ ID_ROL: `${this.ListaMaestra[0].ID}`, PROGRAMA: `${this.ListaMaestra[0].PROGRAMA}`, ROL: `${this.ListaMaestra[0].ROL}` })
                          }
                      } else {
                          this.mostrarToast({ toast: 'danger', msg: 'No tienes asignado un ROL ...' });
                      }
                  }).catch(e => {
                      this.mostrarToast({ toast: 'warning', msg: 'Error en la conexión ...' });
                  });
    
              },
              irInicio: function (item) {
                  localStorage.setItem('ID_ROL', item.ID_ROL);
                  localStorage.setItem('PROGRAMA', item.PROGRAMA);
                  localStorage.setItem('ROL', item.ROL);
                  document.location.href = '/DashBoard/Seguridad/Home';
              },
              pantalla: function (item) {
                  this.$bvModal.show(item.PANTALLA);
              }
          }
      })
    </script>
    

  </body>
</html>
